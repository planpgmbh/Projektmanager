services:
  www_projects:
    build:
      context: .
      dockerfile: dockerfile
    container_name: www_projects
    restart: unless-stopped
    labels:
      - traefik.enable=true
      - traefik.docker.network=proxy
      - traefik.http.services.www_projects.loadbalancer.server.port=80
      - traefik.http.routers.www_projects.rule=Host(`projects.plan-p.de`)
      - traefik.http.routers.www_projects.entrypoints=websecure
      - traefik.http.routers.www_projects.tls=true
      - traefik.http.routers.www_projects.tls.certresolver=letsencrypt
    networks:
      - proxy
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      
networks:
  proxy:
    external: true
  services:
    external: true